(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{4127:function(e,t,n){Promise.resolve().then(n.bind(n,5798))},5798:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E},runtime:function(){return d}});var s=n(7573),r=n(7653),i=n(3400),c=n(1988),l=n(5118),a=n(3989),o=n(5555);let u=(0,n(2389).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),d="edge";function E(){let[e]=(0,r.useState)(null),{data:t,isLoading:n}=(0,c.a)({queryKey:["attendance","today",e],queryFn:async()=>(await (0,l.S)("/attendance/today/list?siteId=".concat(e))).data,enabled:!!e,refetchInterval:3e4}),d=e=>new Date(e).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"출근 현황"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"오늘 출근"}),(0,s.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(i.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[(null==t?void 0:t.length)||0,"명"]})})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"첫 출근"}),(0,s.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(i.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:t&&t.length>0?d(t[0].checkinAt):"-"})})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"마지막 출근"}),(0,s.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(i.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:t&&t.length>0?d(t[t.length-1].checkinAt):"-"})})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsx)(i.ll,{children:"출근 목록"})}),(0,s.jsx)(i.aY,{children:e?n?(0,s.jsx)("p",{className:"text-center py-8",children:"로딩 중..."}):t&&t.length>0?(0,s.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>{var n,r,i,c;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground w-6",children:t+1}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:(null===(n=e.user)||void 0===n?void 0:n.nameMasked)||(null===(r=e.user)||void 0===r?void 0:r.name)||e.externalWorkerId}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[null===(i=e.user)||void 0===i?void 0:i.companyName,(null===(c=e.user)||void 0===c?void 0:c.tradeType)&&" \xb7 ".concat(e.user.tradeType)]})]})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:d(e.checkinAt)})]},e.id)})}):(0,s.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"오늘 출근 기록이 없습니다."}):(0,s.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"현장을 선택해주세요."})})]})]})}},5118:function(e,t,n){"use strict";n.d(t,{S:function(){return c}});var s=n(8144);let r="https://safework2.jclee.me/api";class i extends Error{constructor(e,t,n){super(e),this.status=t,this.code=n,this.name="ApiError"}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{tokens:n,logout:c,setTokens:l}=s.t.getState(),a={"Content-Type":"application/json",...t.headers||{}};(null==n?void 0:n.accessToken)&&(a.Authorization="Bearer ".concat(n.accessToken));let o=await fetch("".concat(r).concat(e),{...t,headers:a});if(401===o.status&&(null==n?void 0:n.refreshToken)){let s=await fetch("".concat(r,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:n.refreshToken})});if(s.ok){let n=await s.json();l(n),a.Authorization="Bearer ".concat(n.accessToken),o=await fetch("".concat(r).concat(e),{...t,headers:a})}else throw c(),new i("Session expired",401,"SESSION_EXPIRED")}if(!o.ok){let e=await o.json().catch(()=>({}));throw new i(e.message||"Request failed",o.status,e.code)}return o.json()}},8144:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var s=n(8321),r=n(4452),i=n(3212);let c=(0,s.U)()((0,r.tJ)((e,t)=>({user:null,tokens:null,currentSiteId:null,isAdmin:!1,login:(t,n)=>e({user:t,tokens:n,isAdmin:t.role===i.UserRole.SITE_ADMIN||t.role===i.UserRole.SUPER_ADMIN}),logout:()=>e({user:null,tokens:null,currentSiteId:null,isAdmin:!1}),setTokens:t=>e({tokens:t}),setSiteId:t=>e({currentSiteId:t})}),{name:"safetywallet-admin-auth"}))},5555:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(2389).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3989:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(2389).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5363:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8658:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8536:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4602:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6183:function(e,t,n){"use strict";var s=Object.create?function(e,t,n,s){void 0===s&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]},r=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4602),t),r(n(3700),t),r(n(6668),t),r(n(5769),t),r(n(2232),t),r(n(1098),t),r(n(8658),t),r(n(8536),t)},1098:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5769:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2232:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6668:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9633:function(e,t){"use strict";var n,s,r,i,c,l,a,o,u,d,E,f,N,h,m,O,R,x,p,j;Object.defineProperty(t,"__esModule",{value:!0}),t.RejectReason=t.TaskStatus=t.ReviewAction=t.ActionStatus=t.ReviewStatus=t.Visibility=t.RiskLevel=t.Category=t.MembershipStatus=t.UserRole=void 0,(E=n||(t.UserRole=n={})).WORKER="WORKER",E.SITE_ADMIN="SITE_ADMIN",E.SUPER_ADMIN="SUPER_ADMIN",E.SYSTEM="SYSTEM",(f=s||(t.MembershipStatus=s={})).PENDING="PENDING",f.ACTIVE="ACTIVE",f.LEFT="LEFT",f.REMOVED="REMOVED",(N=r||(t.Category=r={})).HAZARD="HAZARD",N.UNSAFE_BEHAVIOR="UNSAFE_BEHAVIOR",N.INCONVENIENCE="INCONVENIENCE",N.SUGGESTION="SUGGESTION",N.BEST_PRACTICE="BEST_PRACTICE",(h=i||(t.RiskLevel=i={})).HIGH="HIGH",h.MEDIUM="MEDIUM",h.LOW="LOW",(m=c||(t.Visibility=c={})).WORKER_PUBLIC="WORKER_PUBLIC",m.ADMIN_ONLY="ADMIN_ONLY",(O=l||(t.ReviewStatus=l={})).RECEIVED="RECEIVED",O.IN_REVIEW="IN_REVIEW",O.NEED_INFO="NEED_INFO",O.APPROVED="APPROVED",O.REJECTED="REJECTED",(R=a||(t.ActionStatus=a={})).NONE="NONE",R.REQUIRED="REQUIRED",R.ASSIGNED="ASSIGNED",R.IN_PROGRESS="IN_PROGRESS",R.DONE="DONE",R.REOPENED="REOPENED",(x=o||(t.ReviewAction=o={})).APPROVE="APPROVE",x.REJECT="REJECT",x.REQUEST_MORE="REQUEST_MORE",x.MARK_URGENT="MARK_URGENT",x.ASSIGN="ASSIGN",x.CLOSE="CLOSE",(p=u||(t.TaskStatus=u={})).OPEN="OPEN",p.IN_PROGRESS="IN_PROGRESS",p.DONE="DONE",(j=d||(t.RejectReason=d={})).DUPLICATE="DUPLICATE",j.UNCLEAR_PHOTO="UNCLEAR_PHOTO",j.INSUFFICIENT="INSUFFICIENT",j.FALSE="FALSE",j.IRRELEVANT="IRRELEVANT",j.OTHER="OTHER"},3212:function(e,t,n){"use strict";var s=Object.create?function(e,t,n,s){void 0===s&&(s=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,r)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]},r=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(9633),t),r(n(5363),t),r(n(6183),t)}},function(e){e.O(0,[995,976,276,400,293,456,744],function(){return e(e.s=4127)}),_N_E=e.O()}]);