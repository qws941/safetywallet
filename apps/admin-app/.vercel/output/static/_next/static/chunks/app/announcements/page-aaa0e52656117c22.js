(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{2042:function(e,s,n){Promise.resolve().then(n.bind(n,6554))},6554:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return u}});var t=n(7573),a=n(7653),i=n(3172),l=n(2389);let c=(0,l.Z)("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),d=(0,l.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var r=n(997),x=n(3400),h=n(189);function u(){let{data:e=[],isLoading:s}=(0,h.Y7)(),n=(0,h.qQ)(),l=(0,h.PQ)(),u=(0,h.Zf)(),[o,m]=(0,a.useState)(!1),[j,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(""),[v,k]=(0,a.useState)(""),[N,y]=(0,a.useState)(!1),[b,P]=(0,a.useState)(null),z=()=>{m(!1),p(null),g(""),k(""),y(!1)},C=e=>{p(e.id),g(e.title),k(e.content),y(e.isPinned),m(!0)},w=e=>{P(e)},Z=[...e].sort((e,s)=>e.isPinned&&!s.isPinned?-1:!e.isPinned&&s.isPinned?1:new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime());return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"공지사항"}),!o&&(0,t.jsxs)(x.zx,{onClick:()=>m(!0),className:"gap-1",children:[(0,t.jsx)(i.Z,{size:16}),"새 공지"]})]}),o&&(0,t.jsxs)(x.Zb,{className:"p-6",children:[(0,t.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:j?"공지 수정":"새 공지 작성"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(x.II,{placeholder:"제목",value:f,onChange:e=>g(e.target.value)}),(0,t.jsx)("textarea",{placeholder:"내용",value:v,onChange:e=>k(e.target.value),className:"min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm"}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:N,onChange:e=>y(e.target.checked),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm",children:"상단 고정"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(x.zx,{onClick:()=>{f&&v&&(j?l.mutate({id:j,title:f,content:v,isPinned:N},{onSuccess:z}):n.mutate({title:f,content:v,isPinned:N},{onSuccess:z}))},disabled:!f||!v||n.isPending||l.isPending,children:j?"수정":"등록"}),(0,t.jsx)(x.zx,{variant:"outline",onClick:z,children:"취소"})]})]})]}),s?(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"로딩 중..."}):0===Z.length?(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"공지사항이 없습니다"}):(0,t.jsx)("div",{className:"space-y-4",children:Z.map(e=>(0,t.jsx)(x.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[e.isPinned&&(0,t.jsx)(c,{size:16,className:"text-primary"}),(0,t.jsx)("h3",{className:"font-semibold",children:e.title}),e.isPinned&&(0,t.jsx)(x.Ct,{variant:"secondary",children:"고정"})]}),(0,t.jsx)("p",{className:"whitespace-pre-wrap text-muted-foreground",children:e.content}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleString("ko-KR")})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(x.zx,{variant:"ghost",size:"icon",onClick:()=>C(e),children:(0,t.jsx)(d,{size:16})}),(0,t.jsx)(x.zx,{variant:"ghost",size:"icon",onClick:()=>w(e.id),disabled:u.isPending,children:(0,t.jsx)(r.Z,{size:16})})]})]})},e.id))}),(0,t.jsx)(x.aR,{open:!!b,onOpenChange:e=>!e&&P(null),children:(0,t.jsxs)(x._T,{children:[(0,t.jsxs)(x.fY,{children:[(0,t.jsx)(x.f$,{children:"삭제 확인"}),(0,t.jsx)(x.yT,{children:"정말 삭제하시겠습니까?"})]}),(0,t.jsxs)(x.xo,{children:[(0,t.jsx)(x.le,{children:"취소"}),(0,t.jsx)(x.OL,{onClick:()=>{b&&u.mutate(b,{onSuccess:()=>{(0,x.Am)({description:"삭제되었습니다."}),P(null)},onError:e=>{(0,x.Am)({variant:"destructive",description:"삭제 실패: "+e.message}),P(null)}})},children:"삭제"})]})]})})]})}},3172:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});let t=(0,n(2389).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},997:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});let t=(0,n(2389).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[995,976,276,400,189,293,456,744],function(){return e(e.s=2042)}),_N_E=e.O()}]);